<h2>売上検索</h2>

<div class="form-container">
  <label>
    商品名:
    <input [(ngModel)]="productName" placeholder="部分一致" />
  </label>

  <label>
    商品コード:
    <input [(ngModel)]="productCode" />
  </label>

  <label>
    販売先名:
    <input [(ngModel)]="customerName" placeholder="部分一致" />
  </label>

  <label>
    販売先コード:
    <input [(ngModel)]="customerCode" />
  </label>

  <button (click)="search()">検索</button>
</div>

<!-- 読み込み中 -->
@if (loading) {
  <p>検索中…</p>
}

<!-- 結果表示 -->
@if (!loading && results.length > 0) {
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>商品名</th>
          <th>商品コード</th>
          <th>販売先</th>
          <th>販売先コード</th>
          <th>金額</      th>
          <th>数量</th>
          <th>売上日</th>
        </tr>
      </thead>

      <tbody>
        @for (r of results; track r.product_code) {
          <tr>
            <td>{{ r.product_name }}</td>
            <td>{{ r.product_code }}</td>
            <td>{{ r.customer_name }}</td>
            <td>{{ r.customer_code }}</td>
            <td>{{ r.amount }}</td>
            <td>{{ r.quantity }}</td>
            <td>{{ r.sold_at }}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}

@if (!loading && results.length === 0) {
  <p>該当データがありません。</p>
}
